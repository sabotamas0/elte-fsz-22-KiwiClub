<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
>
<head>
    <meta charset="UTF-8">
    <title>SEE Kiwi</title>

</head>
<body>
<h1 th:value="${userKiwi.getKiwiId()}" th:text="${userKiwi.getName()}"></h1>
<input type="hidden"  id="kiwiId" th:value="${userKiwi.getKiwiId()}"></input>
<h1 th:text="${userKiwi.getSpecies().toString()}"></h1>
<h1 th:text="${userKiwi.getSex().toString()}"></h1>
<h1 th:text="${happiness}"></h1>

<label for="file">Boldogság:</label>
<progress id="file" th:value="${happiness}" max="100"> happiness% </progress>

<label for="file">Jóllakottság:</label>
<progress id="file" th:value="${hunger}" max="100"> hunger% </progress>

<label for="file">Hidratáltság:</label>
<progress id="file" th:value="${thirst}" max="100"> thirst% </progress>

<div class="form-group mb-3">
    <label class="form-label">Trükkök :</label>
    <select class="form-control" id="trickSelection">
        <option th:each="trick : ${tricks}" th:value="${trick.getTrickId()}" th:text="${trick.getName()}"></option>
    </select>
</div>

<div class="Lectures" th:insert="lectureList :: lectureList"></div>

<form method="post" role="form" th:action="@{/toDrink}">
    <label class="form-label">Italok :</label>
    <input type="hidden" name="kiwiId" th:value="${userKiwi.getKiwiId()}">
    <select class="form-control"  th:field="${drink.drinkName}">
        <option th:each="drinkss : ${drinks}" th:value="${drinkss.getName()}" th:text="${drinkss.getName()}"></option>
    </select>
    <button type="submit">Itat</button>
</form>

<form method="post" role="form" th:action="@{/toEat}">
    <label class="form-label">Ételek :</label>
    <input type="hidden" name="kiwiId" th:value="${userKiwi.getKiwiId()}">
    <select class="form-control"  th:field="${food.foodName}">
        <option th:each="food : ${foods}" th:value="${food.getName()}" th:text="${food.getName()}"></option>
    </select>
    <button type="submit">Etet</button>
</form>

</body>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script type="text/javascript">

    $(function () {
        $("#trickSelection").on("change", function () {
            var selectedTrickId = $("#trickSelection").find(":selected").val();
            var kiwiId = $("#kiwiId").val();
            var toLearn = {

                kiwiId: kiwiId,
                trickId : selectedTrickId
            };
            $.ajax({
                url: '/fillLectures',
                dataType: "html",
                data:  JSON.stringify(toLearn),
                type: "POST",
                contentType: "application/json",
                success: function (response) {
                    $('.Lectures').html(response);
                },
                error: function (err) {
                    alert(err.responseText);
                }
            });
        });
    });

</script>

</html>